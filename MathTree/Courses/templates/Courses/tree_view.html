{% extends "Courses/courses_base.html" %}
{% block content_ %}

{% load static %}

<p>Bienvenue sur l'arbre de MathTree !</p>
</main>
<div id="tree_page_container">
  <div class="future_iFrame">
    <p>This will contain a future IFrame, which is great ! Finally works.</p>
  </div>

  <div id="container"></div>
  <script type="text/javascript" src="{% static './Courses/sigma.min.js'%}"></script>
  <script type="text/javascript" src="{% static './Courses/sigma.renderers.canvas.js'%}"></script>
  <script>
      
      const data_as_string = '{{ data|escapejs }}';
      const data_as_json = JSON.parse(data_as_string)
      
      // Let's first initialize sigma:

      const s = new sigma({ 
        graph: data_as_json,
        renderer: {
          container: document.getElementById('container'),
          type: 'canvas'
        },

        settings: {
            enableEdgeHovering: true,
            edgeHoverSizeRatio: '3',
            defaultEdgeType:'line',
            defaultEdgeHoverColor: '#0000FF',
            
        }
      });
      // Finally, let's ask our sigma instance to refresh:
      s.refresh();

      s.bind('clickEdge', function(e) {
        // Get Edge 
        document.getElementById('tree_page_container').innerHTML = 'hi';

        s.refresh();        
    });

    s.bind('clickNode', function(e) {
        // Get Edge 
        document.getElementById('tree_page_container').innerHTML = 'hi';

        s.refresh();        
    });
    

  </script>
  </div>


{% endblock %}